<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>3D ì£¼ì°¨ì¥ A* ìµœì í™” ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        :root {
            --board-width: 320px;
            --num-rows: 4;
            --num-cols: 4;
            --tile-w: calc(var(--board-width) / var(--num-cols));
            --tile-h: var(--tile-w);
            --anim: 400ms;
            --c-bg: #f5f5f5;
            --c-elev: #243642;
            --c-entr: #FFD700;
            --c-car1: #387478;
            --c-car2: #FF6B6B;
            --c-car3: #4ECDC4;
            --c-car4: #45B7D1;
            --c-car5: #96CEB4;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            gap: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            
            min-height: 100vh;
            color: rgb(0, 0, 0);
        }

        h1 {
            font-size: 28px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        #wrap {
            display: flex;
            gap: 24px;
            align-items: flex-start;
        }

        .floor-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .board {
            position: relative;
            width: 326px;
            height: var(--board-width);
            border: 3px solid #333;
            background: var(--c-bg);
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .floor-label {
            font-size: 18px;
            font-weight: bold;
            color: rgb(0, 0, 0);
        }

        .tile {
            position: absolute;
            width: var(--tile-w);
            height: var(--tile-h);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #fff;
            border-radius: 6px;
            transition: transform var(--anim) ease-in-out;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            font-size: 14px;
        }

        .car1 { background: var(--c-car1); }
        .car2 { background: var(--c-car2); }
        .car3 { background: var(--c-car3); }
        .car4 { background: var(--c-car4); }
        .car5 { background: var(--c-car5); }

        .elev {
            background: var(--c-elev);
        }

        .entr {
            background: var(--c-entr);
            color: #333;
            border: 2px solid #333;
        }

        #controls {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        button {
            border: none;
            padding: 12px 24px;
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        #status {
            background: rgba(255,255,255,0.1);
            padding: 16px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            text-align: center;
            min-width: 300px;
        }

        .info-panel {
            background: rgba(255,255,255,0.1);
            padding: 16px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            margin-top: 16px;
        }

        .eta-info {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-top: 8px;
        }

        .eta-item {
            text-align: center;
            padding: 8px;
            border-radius: 6px;
            background: rgba(255,255,255,0.1);
            font-size: 12px;
        }
    </style>
</head>

<body>
    <h1>ê³µí•­ì£¼ì°¨ì¥</h1>
    <div class="subtitle">ì¶œì°¨ì‹œê°„ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ì°¨ëŸ‰ ì¬ë°°ì¹˜ ì‹œìŠ¤í…œ</div>
    
    <div id="wrap">
        <div class="floor-container">
            <div class="board" id="floor0"></div>
            <div class="floor-label">1ì¸µ</div>
        </div>
        <div class="floor-container">
            <div class="board" id="floor1"></div>
            <div class="floor-label">2ì¸µ</div>
        </div>
    </div>

    <div id="controls">
        <button id="run">ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘</button>
        <button id="reset">ì´ˆê¸°í™”</button>
    </div>

    <div id="status">
        <div><span id="current-status">ì¤€ë¹„ ì™„ë£Œ</span></div>
        <div><strong>ì´ë™ ë‹¨ê³„:</strong> <span id="step-count">0 / 21</span></div>
    </div>

    <div class="info-panel">
        <div><strong>ì¶œì°¨ê¹Œì§€ ë‚¨ì€ ì‹œê°„</strong></div>
        <div class="eta-info">
            <div class="eta-item">
                <div style="background: var(--c-car2); width: 20px; height: 20px; margin: 0 auto 4px; border-radius: 50%;"></div>
                <div>ì°¨ëŸ‰ 2</div>
                <div>15ë¶„</div>
            </div>
            <div class="eta-item">
                <div style="background: var(--c-car4); width: 20px; height: 20px; margin: 0 auto 4px; border-radius: 50%;"></div>
                <div>ì°¨ëŸ‰ 4</div>
                <div>20ë¶„</div>
            </div>
            <div class="eta-item">
                <div style="background: var(--c-car1); width: 20px; height: 20px; margin: 0 auto 4px; border-radius: 50%;"></div>
                <div>ì°¨ëŸ‰ 1</div>
                <div>30ë¶„</div>
            </div>
            <div class="eta-item">
                <div style="background: var(--c-car5); width: 20px; height: 20px; margin: 0 auto 4px; border-radius: 50%;"></div>
                <div>ì°¨ëŸ‰ 5</div>
                <div>35ë¶„</div>
            </div>
            <div class="eta-item">
                <div style="background: var(--c-car3); width: 20px; height: 20px; margin: 0 auto 4px; border-radius: 50%;"></div>
                <div>ì°¨ëŸ‰ 3</div>
                <div>45ë¶„</div>
            </div>
        </div>
    </div>

    <script>
        const ROWS = 4, COLS = 4;
        const floorEls = [document.getElementById('floor0'), document.getElementById('floor1')];
        const ELEV_POS = [{ f: 0, r: 0, c: 0 }, { f: 1, r: 0, c: 0 }];
        const ENTR_POS = { f: 0, r: 0, c: 3 };
        
        // ì´ˆê¸° ì°¨ëŸ‰ ìœ„ì¹˜
        const carInit = [
            { id: 1, f: 0, r: 1, c: 1, eta: 30 },
            { id: 2, f: 1, r: 2, c: 2, eta: 15 },
            { id: 3, f: 0, r: 2, c: 1, eta: 45 },
            { id: 4, f: 1, r: 1, c: 3, eta: 20 },
            { id: 5, f: 0, r: 0, c: 3, eta: 35 }
        ];

        // ì œê³µë°›ì€ ì´ë™ ìˆœì„œ
        const sequence = [
            { id: 2, f: 1, r: 1, c: 2 },  // 1
            { id: 2, f: 1, r: 0, c: 2 },  // 2
            { id: 2, f: 1, r: 0, c: 1 },  // 3
            { id: 4, f: 1, r: 1, c: 2 },  // 4
            { id: 4, f: 1, r: 1, c: 1 },  // 5
            { id: 4, f: 1, r: 1, c: 0 },  // 6
            { id: 4, f: 1, r: 0, c: 0 },  // 7
            { id: 4, f: 0, r: 0, c: 0 },  // 8 (ì¸µê°„ì´ë™)
            { id: 2, f: 1, r: 0, c: 0 },  // 9
            { id: 4, f: 0, r: 0, c: 1 },  // 10
            { id: 2, f: 0, r: 0, c: 0 },  // 11 (ì¸µê°„ì´ë™)
            { id: 5, f: 0, r: 1, c: 3 },  // 12
            { id: 4, f: 0, r: 0, c: 2 },  // 13
            { id: 4, f: 0, r: 0, c: 3 },  // 14
            { id: 2, f: 0, r: 0, c: 1 },  // 15
            { id: 2, f: 0, r: 0, c: 2 },  // 16
            { id: 1, f: 0, r: 0, c: 1 },  // 17
            { id: 5, f: 0, r: 1, c: 2 },  // 18
            { id: 4, f: 0, r: 1, c: 3 },  // 19
            { id: 3, f: 0, r: 2, c: 2 },  // 20
            { id: 3, f: 0, r: 2, c: 3 }   // 21
        ];

        let cars = {};
        let isRunning = false;
        let currentStep = 0;

        function placeTile({ f, r, c, cls, text }) {
            const el = document.createElement('div');
            el.className = 'tile ' + cls;
            if (text) el.textContent = text;
            el.style.transform = `translate(calc(var(--tile-w)*${c}), calc(var(--tile-h)*${r}))`;
            floorEls[f].appendChild(el);
            return el;
        }

        function init() {
            // ë³´ë“œ ì´ˆê¸°í™”
            floorEls.forEach(b => b.innerHTML = '');
            cars = {};
            currentStep = 0;
            
            // ì—˜ë¦¬ë² ì´í„° ë°°ì¹˜
            ELEV_POS.forEach(p => placeTile({ 
                f: p.f, r: p.r, c: p.c, cls: 'elev', text: 'ELV' 
            }));
            
            // ì¶œì…êµ¬ ë°°ì¹˜
            placeTile({ 
                f: ENTR_POS.f, r: ENTR_POS.r, c: ENTR_POS.c, cls: 'entr', text: 'ENT' 
            });
            
            // ì°¨ëŸ‰ ë°°ì¹˜
            carInit.forEach(car => {
                const el = placeTile({ 
                    f: car.f, r: car.r, c: car.c, 
                    cls: `car${car.id}`, text: car.id 
                });
                cars[car.id] = { el, f: car.f, r: car.r, c: car.c };
            });

            updateStatus('ì¤€ë¹„ ì™„ë£Œ', 0);
        }

        function updateStatus(status, step) {
            document.getElementById('current-status').textContent = status;
            document.getElementById('step-count').textContent = `${step} / ${sequence.length}`;
        }

        function run() {
            if (isRunning) return;
            isRunning = true;
            
            document.getElementById('run').disabled = true;
            document.getElementById('reset').disabled = true;
            
            let i = 0;
            
            function step() {
                if (i >= sequence.length) {
                    updateStatus('ìµœì í™” ì™„ë£Œ! ğŸ‰', sequence.length);
                    document.getElementById('run').disabled = false;
                    document.getElementById('reset').disabled = false;
                    isRunning = false;
                    return;
                }
                
                const move = sequence[i];
                const car = cars[move.id];
                
                updateStatus(`ì°¨ëŸ‰ ${move.id} ì´ë™ ì¤‘...`, i + 1);
                
                // ì¸µê°„ ì´ë™ ì²˜ë¦¬
                if (car.f !== move.f) {
                    floorEls[car.f].removeChild(car.el);
                    floorEls[move.f].appendChild(car.el);
                    car.f = move.f;
                }
                
                // ìœ„ì¹˜ ì—…ë°ì´íŠ¸
                car.r = move.r;
                car.c = move.c;
                car.el.style.transform = `translate(calc(var(--tile-w)*${move.c}), calc(var(--tile-h)*${move.r}))`;
                
                i++;
                setTimeout(step, 500); // 0.5ì´ˆ ê°„ê²©
            }
            
            step();
        }

        function reset() {
            if (isRunning) return;
            init();
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById('run').addEventListener('click', run);
        document.getElementById('reset').addEventListener('click', reset);

        // ì´ˆê¸°í™”
        init();
    </script>
</body>

</html>